<% @page_title = "Maintenance" %>

<div class="container">
  <div class="card" style="text-align: center; padding: 60px 40px;">
    <% if @maintenance.logo_url.present? %>
      <%= image_tag @maintenance.logo_url, alt: "Logo", style: "max-width: 200px; max-height: 100px; margin-bottom: 30px; border-radius: 12px;" %>
    <% end %>
    
    <h1 style="font-size: 3rem; font-weight: 700; margin-bottom: 20px; color: var(--text-primary);">
      <%= @maintenance.title %>
    </h1>
    
    <% if @maintenance.subtitle.present? %>
      <h2 style="font-size: 1.5rem; font-weight: 300; margin-bottom: 30px; color: var(--text-muted);">
        <%= @maintenance.subtitle %>
      </h2>
    <% end %>
    
    <% if @maintenance.description.present? %>
      <p style="font-size: 1.1rem; line-height: 1.6; margin-bottom: 40px; color: var(--text-secondary);">
        <%= simple_format(@maintenance.description) %>
      </p>
    <% end %>
    
    <% if @maintenance.countdown_date.present? %>
      <div style="background: var(--bg-hover); border-radius: 20px; padding: 30px; margin-bottom: 40px; border: 1px solid var(--border-color);">
        <div style="font-size: 1.2rem; margin-bottom: 20px; font-weight: 600; color: var(--text-primary);">
          Retour pr√©vu dans :
        </div>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap: 20px; max-width: 400px; margin: 0 auto;">
          <div style="text-align: center;">
            <span style="font-size: 2.5rem; font-weight: 700; display: block; margin-bottom: 5px; color: var(--color-accent);" id="days">0</span>
            <span style="font-size: 0.9rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px;">Jours</span>
          </div>
          <div style="text-align: center;">
            <span style="font-size: 2.5rem; font-weight: 700; display: block; margin-bottom: 5px; color: var(--color-accent);" id="hours">0</span>
            <span style="font-size: 0.9rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px;">Heures</span>
          </div>
          <div style="text-align: center;">
            <span style="font-size: 2.5rem; font-weight: 700; display: block; margin-bottom: 5px; color: var(--color-accent);" id="minutes">0</span>
            <span style="font-size: 0.9rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px;">Minutes</span>
          </div>
          <div style="text-align: center;">
            <span style="font-size: 2.5rem; font-weight: 700; display: block; margin-bottom: 5px; color: var(--color-accent);" id="seconds">0</span>
            <span style="font-size: 0.9rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px;">Secondes</span>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>

<% if @maintenance.countdown_date.present? %>
  <script>
    const countdownDate = new Date('<%= @maintenance.countdown_date.iso8601 %>').getTime();
    
    function updateCountdown() {
      const now = new Date().getTime();
      const distance = countdownDate - now;
      
      if (distance < 0) {
        document.getElementById('days').textContent = '0';
        document.getElementById('hours').textContent = '0';
        document.getElementById('minutes').textContent = '0';
        document.getElementById('seconds').textContent = '0';
        return;
      }
      
      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);
      
      document.getElementById('days').textContent = days;
      document.getElementById('hours').textContent = hours;
      document.getElementById('minutes').textContent = minutes;
      document.getElementById('seconds').textContent = seconds;
    }
    
    updateCountdown();
    setInterval(updateCountdown, 1000);
  </script>
<% end %>
