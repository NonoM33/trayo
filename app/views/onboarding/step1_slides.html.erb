<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Les R√®gles - Trayo</title>
  <%= stylesheet_link_tag "onboarding", "data-turbo-track": "reload" %>
</head>
<body class="onboarding-slides">
  <div class="slides-container">
    <div class="slides-progress">
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="progress-text">
        <span id="currentSlide">1</span> / <span id="totalSlides">7</span>
      </div>
    </div>
    
    <div class="slides-wrapper">
      <div class="slide active" data-slide="1">
        <div class="slide-content">
          <div class="slide-icon">üìä</div>
          <h2 class="slide-title">Les performances pass√©es ne pr√©jugent pas des futures</h2>
          <p class="slide-text">Tous les r√©sultats affich√©s sont bas√©s sur des donn√©es historiques. Le trading comporte des risques et les r√©sultats peuvent varier.</p>
        </div>
      </div>
      
      <div class="slide" data-slide="2">
        <div class="slide-content">
          <div class="slide-icon">‚ö†Ô∏è</div>
          <h2 class="slide-title">Soyez pr√™t √† perdre la totalit√©</h2>
          <p class="slide-text">N'investissez jamais plus que ce que vous pouvez vous permettre de perdre. Le trading automatis√© comporte des risques financiers.</p>
        </div>
      </div>
      
      <div class="slide" data-slide="3">
        <div class="slide-content">
          <div class="slide-icon">üö´</div>
          <h2 class="slide-title">Ne trader jamais manuellement</h2>
          <p class="slide-text">Le compte est exclusivement d√©di√© au bot. Tout trading manuel est strictement interdit et entra√Ænera des sanctions.</p>
        </div>
      </div>
      
      <div class="slide" data-slide="4">
        <div class="slide-content">
          <div class="slide-icon">üõ°Ô∏è</div>
          <h2 class="slide-title">Trade Defender actif</h2>
          <p class="slide-text">Notre syst√®me Trade Defender surveille 24/7 votre compte pour d√©tecter tout trading manuel. Des sanctions financi√®res s'appliquent en cas de violation.</p>
        </div>
      </div>
      
      <div class="slide" data-slide="5">
        <div class="slide-content">
          <div class="slide-icon">‚è∞</div>
          <h2 class="slide-title">Commissions toutes les 2 semaines</h2>
          <p class="slide-text">Les commissions sont √† r√©gler toutes les 2 semaines. Un email vous sera envoy√© avec le d√©tail de vos gains et commissions dues.</p>
        </div>
      </div>
      
      <div class="slide" data-slide="6">
        <div class="slide-content">
          <div class="slide-icon">üí∞</div>
          <h2 class="slide-title">Frais de remise en service</h2>
          <p class="slide-text">Si vous ne r√©glez pas dans les d√©lais, vos bots seront d√©sactiv√©s et des frais de remise en service seront appliqu√©s.</p>
        </div>
      </div>
      
      <div class="slide" data-slide="7">
        <div class="slide-content">
          <div class="slide-icon">üìß</div>
          <h2 class="slide-title">Suivi r√©gulier</h2>
          <p class="slide-text">Vous recevrez des rapports hebdomadaires sur les performances de vos bots et des notifications importantes par email.</p>
        </div>
      </div>
    </div>
    
    <div class="slides-controls">
      <button class="btn-secondary" id="prevBtn" style="display: none;">Pr√©c√©dent</button>
      <button class="btn-primary" id="nextBtn">Suivant</button>
    </div>
    
    <div class="slides-nav">
      <div class="dots" id="dots"></div>
    </div>
  </div>
  
  <div class="mini-quiz hidden" id="quizSection">
    <div class="quiz-content">
      <h2>Compris ?</h2>
      <p>Quel est le d√©lai pour r√©gler les commissions ?</p>
      <div class="quiz-options">
        <button class="quiz-option" data-answer="weekly">Toutes les semaines</button>
        <button class="quiz-option correct" data-answer="biweekly">Toutes les 2 semaines</button>
        <button class="quiz-option" data-answer="monthly">Tous les mois</button>
      </div>
      <div class="quiz-feedback" id="quizFeedback"></div>
    </div>
  </div>
  
  <div class="slide-form hidden" id="formSection">
    <%= form_with url: onboarding_next_step_path(@invitation.code), method: :post, local: true, class: "onboarding-form" do |f| %>
      <div class="form-header">
        <h2>Vos informations</h2>
        <p>Remplissez ces informations pour continuer</p>
      </div>
      
      <div class="form-group">
        <%= f.text_field :first_name, placeholder: "Pr√©nom", required: true, class: "form-input" %>
      </div>
      
      <div class="form-group">
        <%= f.text_field :last_name, placeholder: "Nom", required: true, class: "form-input" %>
      </div>
      
      <div class="form-group">
        <%= f.email_field :email, placeholder: "Email", required: true, class: "form-input" %>
      </div>
      
      <div class="form-group">
        <%= f.telephone_field :phone, placeholder: "T√©l√©phone", required: true, class: "form-input" %>
      </div>
      
      <div class="form-group">
        <%= f.number_field :budget, placeholder: "Budget d'investissement (‚Ç¨)", required: true, min: 100, step: 100, class: "form-input" %>
      </div>
      
      <%= f.submit "Continuer", class: "btn-primary" %>
    <% end %>
  </div>
  
  <script>
    let currentSlide = 1;
    const totalSlides = 7;
    
    const slides = document.querySelectorAll('.slide');
    const dots = document.getElementById('dots');
    const progressFill = document.getElementById('progressFill');
    const currentSlideSpan = document.getElementById('currentSlide');
    const totalSlidesSpan = document.getElementById('totalSlides');
    const nextBtn = document.getElementById('nextBtn');
    const prevBtn = document.getElementById('prevBtn');
    
    for (let i = 1; i <= totalSlides; i++) {
      const dot = document.createElement('span');
      dot.className = 'dot';
      dot.setAttribute('data-slide', i);
      dots.appendChild(dot);
    }
    
    updateSlides();
    
    nextBtn.addEventListener('click', () => {
      if (currentSlide < totalSlides) {
        currentSlide++;
        updateSlides();
      } else {
        showQuiz();
      }
    });
    
    prevBtn.addEventListener('click', () => {
      if (currentSlide > 1) {
        currentSlide--;
        updateSlides();
      }
    });
    
    function updateSlides() {
      slides.forEach((slide, index) => {
        if (index + 1 === currentSlide) {
          slide.classList.add('active');
        } else {
          slide.classList.remove('active');
        }
      });
      
      const dotElements = dots.querySelectorAll('.dot');
      dotElements.forEach((dot, index) => {
        if (index + 1 === currentSlide) {
          dot.classList.add('active');
        } else {
          dot.classList.remove('active');
        }
      });
      
      progressFill.style.width = (currentSlide / totalSlides) * 100 + '%';
      currentSlideSpan.textContent = currentSlide;
      
      prevBtn.style.display = currentSlide === 1 ? 'none' : 'inline-flex';
      nextBtn.textContent = currentSlide === totalSlides ? 'Passer au quiz' : 'Suivant';
    }
    
    function showQuiz() {
      document.querySelector('.slides-container').classList.add('hidden');
      document.querySelector('.mini-quiz').classList.remove('hidden');
    }
    
    const quizOptions = document.querySelectorAll('.quiz-option');
    let quizCompleted = false;
    
    quizOptions.forEach(option => {
      option.addEventListener('click', () => {
        if (quizCompleted) return;
        
        const correctAnswer = option.classList.contains('correct');
        
        quizOptions.forEach(opt => {
          if (opt.classList.contains('correct')) {
            opt.classList.add('show-correct');
          }
          opt.disabled = true;
        });
        
        if (correctAnswer) {
          option.classList.add('correct-answer');
          setTimeout(() => {
            document.querySelector('.mini-quiz').classList.add('hidden');
            document.querySelector('.slide-form').classList.remove('hidden');
          }, 1500);
        } else {
          option.classList.add('wrong-answer');
        }
        
        quizCompleted = true;
      });
    });
  </script>
</body>
</html>

