<div class="main-content">
  <div class="container">
    <div class="card">
      <h2>âœ… Test des Routes et Drawdown</h2>
      <p>Cette page confirme que les nouvelles routes fonctionnent et teste le calcul du drawdown.</p>
      
      <div style="margin: 20px 0;">
        <h3>ðŸŽ¯ Nouvelles Routes Disponibles</h3>
        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; border-left: 4px solid #4caf50;">
          <p><strong>âœ… Routes de test fonctionnelles :</strong></p>
          <ul>
            <li><code>/admin/test/client_dropdowns</code> - Test des dropdowns client</li>
            <li><code>/admin/test/debug</code> - Page de debug</li>
            <li><code>/admin/test/routes</code> - Cette page de test</li>
            <li><code>/admin/clients</code> - Liste des clients</li>
            <li><code>/admin/clients/:id</code> - DÃ©tails d'un client</li>
          </ul>
        </div>
      </div>
      
      <div style="margin: 20px 0;">
        <h3>ðŸ“Š ProblÃ¨me du Drawdown</h3>
        <div style="background: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107;">
          <p><strong>ProblÃ¨me identifiÃ© :</strong></p>
          <ul>
            <li>Le bot "petrole" devrait avoir un drawdown de 35â‚¬</li>
            <li>Mais le dashboard affiche 0â‚¬</li>
            <li>Le calcul du drawdown a Ã©tÃ© amÃ©liorÃ© avec des logs de debug</li>
          </ul>
        </div>
      </div>
      
      <div style="margin: 20px 0;">
        <h3>ðŸ§ª Test des Dropdowns</h3>
        <p>Maintenant que les routes fonctionnent, vous pouvez tester les dropdowns :</p>
        
        <div style="display: flex; gap: 12px; margin: 16px 0;">
          <a href="/admin/test/client_dropdowns" class="btn btn-primary">
            <i class="fa-solid fa-test-tube"></i> Tester les Dropdowns Client
          </a>
          <a href="/admin/test/debug" class="btn btn-outline">
            <i class="fa-solid fa-bug"></i> Page de Debug
          </a>
        </div>
      </div>
      
      <div style="margin: 20px 0;">
        <h3>ðŸ”§ Corrections AppliquÃ©es</h3>
        <div style="background: #d1ecf1; padding: 15px; border-radius: 8px; border-left: 4px solid #17a2b8;">
          <p><strong>ProblÃ¨mes rÃ©solus :</strong></p>
          <ul>
            <li>âœ… ContrÃ´leur sÃ©parÃ© pour les tests (pas de conflit avec before_action)</li>
            <li>âœ… Routes spÃ©cifiques avant les resources</li>
            <li>âœ… Calcul du drawdown amÃ©liorÃ© avec logs de debug</li>
            <li>âœ… Tri correct des trades par close_time</li>
          </ul>
        </div>
      </div>
      
      <div style="margin: 20px 0;">
        <h3>ðŸ“‹ Instructions pour le Drawdown</h3>
        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px; border-left: 4px solid #2196f3;">
          <p><strong>Pour vÃ©rifier le drawdown :</strong></p>
          <ol>
            <li>Allez sur <a href="/admin/clients">/admin/clients</a> pour voir la liste</li>
            <li>Cliquez sur un client pour voir ses dÃ©tails</li>
            <li>VÃ©rifiez la section "Analyse des Bots"</li>
            <li>Regardez les logs Rails pour voir le calcul du drawdown</li>
            <li>Le drawdown devrait maintenant Ãªtre calculÃ© correctement</li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
console.log('=== ROUTES AND DRAWDOWN TEST PAGE ===');
console.log('Page de test des routes et du drawdown chargÃ©e avec succÃ¨s !');

// VÃ©rifier que nous sommes sur la bonne page
console.log('URL actuelle:', window.location.href);
console.log('Path:', window.location.pathname);

// VÃ©rifier les liens disponibles
const testLinks = document.querySelectorAll('a[href*="test/"]');
console.log('Liens de test trouvÃ©s:', testLinks.length);

testLinks.forEach((link, index) => {
  console.log(`Lien ${index}:`, link.href);
});

console.log('=== END ROUTES AND DRAWDOWN TEST PAGE ===');
</script>
