<!DOCTYPE html>
<html>
<head>
  <title>Admin Login - Trayo</title>
  <%= stylesheet_link_tag "admin" %>
  <style>
    .login-container { min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }
    .login-box { background: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); max-width: 400px; width: 100%; }
    h1 { margin-bottom: 30px; color: var(--text-color); text-align: center; }
    .btn { width: 100%; padding: 12px; background: #198754; color: white; border: none; border-radius: 4px; font-size: 16px; cursor: pointer; }
    .btn:hover { background: #157347; }
  </style>
  <script>
    (function() {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        document.documentElement.classList.add('dark-mode');
        document.body.classList.add('dark-mode');
      }
    })();
  </script>
</head>
<body>
  <div style="position: fixed; top: 20px; right: 20px; z-index: 1000;">
    <button class="theme-toggle" onclick="toggleLoginTheme()" aria-label="Toggle dark mode" style="padding: 10px 15px; background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 8px; cursor: pointer; font-size: 18px;">
      <span id="loginThemeIcon">üåô</span>
    </button>
  </div>
  
  <script>
    function toggleLoginTheme() {
      const html = document.documentElement;
      const body = document.body;
      const icon = document.getElementById('loginThemeIcon');
      
      if (html.classList.contains('dark-mode')) {
        html.classList.remove('dark-mode');
        body.classList.remove('dark-mode');
        icon.textContent = 'üåô';
        localStorage.setItem('theme', 'light');
      } else {
        html.classList.add('dark-mode');
        body.classList.add('dark-mode');
        icon.textContent = '‚òÄÔ∏è';
        localStorage.setItem('theme', 'dark');
      }
    }
    
    // Set initial icon
    (function() {
      const savedTheme = localStorage.getItem('theme');
      const icon = document.getElementById('loginThemeIcon');
      if (savedTheme === 'dark' && icon) {
        icon.textContent = '‚òÄÔ∏è';
      }
    })();
  </script>
  
  <div class="login-container">
    <div class="login-box">
      <h1>Admin Login</h1>
      
      <% if flash[:alert] %>
        <div class="alert"><%= flash[:alert] %></div>
      <% end %>

      <%= form_with url: admin_login_path, method: :post do |f| %>
        <div class="form-group">
          <%= label_tag :email, "Email" %>
          <%= email_field_tag :email, nil, required: true %>
        </div>

        <div class="form-group">
          <%= label_tag :password, "Password" %>
          <%= password_field_tag :password, nil, required: true %>
        </div>

        <%= submit_tag "Login", class: "btn" %>
      <% end %>
    </div>
  </div>
</body>
</html>

