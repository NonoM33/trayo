<div class="card">
  <div class="card-header">
    <h2>Configuration Maintenance</h2>
    <div class="action-buttons">
      <%= link_to "Retour", admin_dashboard_path, class: "btn btn-outline" %>
    </div>
  </div>
  
  <div class="card-body">
    <div class="maintenance-status" style="margin-bottom: 30px;">
      <div class="status-indicator <%= @maintenance.is_enabled? ? 'status-active' : 'status-inactive' %>">
        <%= @maintenance.is_enabled? ? 'üü¢ Mode Maintenance Activ√©' : 'üî¥ Mode Maintenance D√©sactiv√©' %>
      </div>
      
      <div style="margin-top: 15px;">
        <%= form_with url: admin_maintenance_toggle_path, method: :patch, local: true, style: "display: inline;" do |form| %>
          <%= form.submit @maintenance.is_enabled? ? 'D√©sactiver la Maintenance' : 'Activer la Maintenance', 
                          class: "btn #{@maintenance.is_enabled? ? 'btn-danger' : 'btn-success'}",
                          confirm: @maintenance.is_enabled? ? '√ätes-vous s√ªr de vouloir d√©sactiver la maintenance ?' : '√ätes-vous s√ªr de vouloir activer la maintenance ?' %>
        <% end %>
      </div>
    </div>
    
    <%= form_with model: @maintenance, url: admin_maintenance_path, method: :patch, local: true do |form| %>
      <% if @maintenance.errors.any? %>
        <div class="alert">
          <h4><%= pluralize(@maintenance.errors.count, "erreur") %> emp√™che(nt) cette configuration d'√™tre sauvegard√©e :</h4>
          <ul style="margin: 8px 0 0 0; padding-left: 20px;">
            <% @maintenance.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>
      
      <div class="two-col">
        <div class="form-group">
          <%= form.label :title, "Titre Principal" %>
          <%= form.text_field :title, placeholder: "Ex: Maintenance Programm√©", required: true %>
          <div class="help-text">
            Titre affich√© en grand sur la page de maintenance
          </div>
        </div>
        
        <div class="form-group">
          <%= form.label :logo_url, "URL du Logo" %>
          <%= form.url_field :logo_url, placeholder: "https://exemple.com/logo.png" %>
          <div class="help-text">
            URL vers l'image du logo (optionnel)
          </div>
        </div>
      </div>
      
      <div class="form-group">
        <%= form.label :subtitle, "Sous-titre" %>
        <%= form.text_field :subtitle, placeholder: "Ex: Nous travaillons pour am√©liorer votre exp√©rience", required: true %>
        <div class="help-text">
          Sous-titre affich√© sous le titre principal
        </div>
      </div>
      
      <div class="form-group">
        <%= form.label :description, "Description" %>
        <%= form.text_area :description, placeholder: "Message d√©taill√© expliquant la maintenance...", rows: 4, required: true %>
        <div class="help-text">
          Description d√©taill√©e de la maintenance
        </div>
      </div>
      
      <div class="form-group">
        <%= form.label :countdown_date, "Date de Fin de Maintenance" %>
        <%= form.datetime_local_field :countdown_date %>
        <div class="help-text">
          Date et heure pr√©vues pour la fin de la maintenance (optionnel - affichera un compte √† rebours)
        </div>
      </div>
      
      <div class="form-group">
        <div class="checkbox-group">
          <%= form.check_box :is_enabled %>
          <%= form.label :is_enabled, "Activer la Maintenance" %>
        </div>
        <div class="help-text">
          Cochez cette case pour activer le mode maintenance
        </div>
      </div>
      
      <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 32px;">
        <%= link_to "Annuler", admin_dashboard_path, class: "btn btn-outline" %>
        <%= form.submit "Sauvegarder", class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
</div>

<div class="card">
  <div class="card-header">
    <h3>Aper√ßu de la Page de Maintenance</h3>
  </div>
  
  <div class="card-body">
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: var(--radius-lg); text-align: center; margin-bottom: 20px;">
      <% if @maintenance.logo_url.present? %>
        <div style="margin-bottom: 20px;">
          <img src="<%= @maintenance.logo_url %>" alt="Logo" style="max-width: 150px; max-height: 80px; border-radius: 8px;">
        </div>
      <% end %>
      
      <h2 style="font-size: 2rem; margin-bottom: 15px; font-weight: 700;">
        <%= @maintenance.title || "Maintenance" %>
      </h2>
      
      <% if @maintenance.subtitle.present? %>
        <h3 style="font-size: 1.2rem; margin-bottom: 20px; opacity: 0.9; font-weight: 300;">
          <%= @maintenance.subtitle %>
        </h3>
      <% end %>
      
      <% if @maintenance.description.present? %>
        <p style="font-size: 1rem; line-height: 1.6; opacity: 0.8;">
          <%= simple_format(@maintenance.description) %>
        </p>
      <% end %>
      
      <% if @maintenance.countdown_date.present? %>
        <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 12px; margin-top: 20px;">
          <div style="font-size: 1rem; margin-bottom: 15px;">Retour pr√©vu dans :</div>
          <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; max-width: 300px; margin: 0 auto;">
            <div style="text-align: center;">
              <div style="font-size: 1.5rem; font-weight: 700;">--</div>
              <div style="font-size: 0.8rem; opacity: 0.8;">Jours</div>
            </div>
            <div style="text-align: center;">
              <div style="font-size: 1.5rem; font-weight: 700;">--</div>
              <div style="font-size: 0.8rem; opacity: 0.8;">Heures</div>
            </div>
            <div style="text-align: center;">
              <div style="font-size: 1.5rem; font-weight: 700;">--</div>
              <div style="font-size: 0.8rem; opacity: 0.8;">Minutes</div>
            </div>
            <div style="text-align: center;">
              <div style="font-size: 1.5rem; font-weight: 700;">--</div>
              <div style="font-size: 0.8rem; opacity: 0.8;">Secondes</div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    
    <div style="background: var(--bg-hover); padding: 15px; border-radius: var(--radius-md); border-left: 4px solid var(--color-accent);">
      <strong>üí° Note :</strong> Les administrateurs peuvent toujours acc√©der au site via <code>/admin</code> m√™me en mode maintenance.
    </div>
  </div>
</div>
