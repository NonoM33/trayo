<% @page_title = "Support" %>

<div class="space-y-6">
  <%= render 'admin/shared/flash_messages' %>

  <div class="bg-neutral-900 rounded-xl overflow-hidden">
    <div class="flex border-b border-neutral-800">
      <%= link_to admin_support_path(tab: 'tickets'), class: "flex items-center gap-2 px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors #{@tab == 'tickets' ? 'text-purple-400 border-b-2 border-purple-400 bg-purple-500/5' : 'text-neutral-400 hover:text-white hover:bg-neutral-800'}" do %>
        <i class="fa-solid fa-headset"></i>
        SAV
        <% unread = SupportTicket.unread.count rescue 0 %>
        <% if unread > 0 %>
          <span class="px-1.5 py-0.5 rounded-full text-[10px] font-bold bg-red-500 text-white"><%= unread %></span>
        <% end %>
      <% end %>
      <%= link_to admin_support_path(tab: 'sms'), class: "flex items-center gap-2 px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors #{@tab == 'sms' ? 'text-blue-400 border-b-2 border-blue-400 bg-blue-500/5' : 'text-neutral-400 hover:text-white hover:bg-neutral-800'}" do %>
        <i class="fa-solid fa-comment-sms"></i>
        SMS
      <% end %>
    </div>

    <div class="p-0">
      <% case @tab %>
      <% when 'tickets' %>
        <%= render 'tickets_tab' %>
      <% when 'sms' %>
        <%= render 'sms_tab' %>
      <% end %>
    </div>
  </div>
</div>

