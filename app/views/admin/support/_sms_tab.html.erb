<div class="p-6 space-y-6">
  <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
    <%= render 'admin/shared/stat_card', icon: 'fa-comment-sms', icon_color: 'blue', label: 'Total', value: @sms_stats[:total] %>
    <%= render 'admin/shared/stat_card', icon: 'fa-paper-plane', icon_color: 'green', label: 'Envoyés', value: @sms_stats[:sent], value_color: 'green' %>
    <%= render 'admin/shared/stat_card', icon: 'fa-clock', icon_color: 'amber', label: 'En Attente', value: @sms_stats[:pending], value_color: 'amber' %>
    <%= render 'admin/shared/stat_card', icon: 'fa-times-circle', icon_color: 'red', label: 'Échoués', value: @sms_stats[:failed], value_color: 'red' %>
  </div>

  <% if @logs&.any? %>
    <div class="overflow-auto max-h-[450px] scrollbar-hide rounded-lg">
      <table class="w-full min-w-[700px] !bg-transparent !border-0">
        <thead class="sticky top-0 z-10 !bg-neutral-950">
          <tr class="*:py-3 *:text-left border-b border-neutral-800">
            <th class="px-4 text-xs font-semibold text-neutral-300">Date</th>
            <th class="px-4 text-xs font-semibold text-neutral-300">Client</th>
            <th class="px-4 text-xs font-semibold text-neutral-300">Type</th>
            <th class="px-4 text-xs font-semibold text-neutral-300">Message</th>
            <th class="px-4 text-xs font-semibold text-neutral-300 text-center">Statut</th>
          </tr>
        </thead>
        <tbody class="bg-neutral-900">
          <% @logs.each do |log| %>
            <tr class="border-b border-neutral-800 hover:bg-neutral-800 transition-colors">
              <td class="px-4 py-3 text-xs text-neutral-400"><%= log.created_at.strftime("%d/%m/%Y %H:%M") %></td>
              <td class="px-4 py-3">
                <% if log.user.present? %>
                  <%= link_to log.user.email.split('@').first, admin_client_path(log.user), class: "text-xs text-blue-400 hover:text-blue-300" %>
                <% else %>
                  <span class="text-xs text-neutral-500">—</span>
                <% end %>
              </td>
              <td class="px-4 py-3">
                <span class="px-1.5 py-0.5 rounded text-[10px] bg-purple-500/20 text-purple-400"><%= log.kind.humanize %></span>
              </td>
              <td class="px-4 py-3">
                <p class="text-xs text-neutral-300 truncate max-w-[300px]" title="<%= log.message_content %>"><%= log.short_message %></p>
              </td>
              <td class="px-4 py-3 text-center">
                <% variant = case log.status
                   when 'sent' then 'success'
                   when 'pending' then 'warning'
                   when 'failed' then 'danger'
                   else 'neutral'
                   end %>
                <%= render 'admin/shared/status_badge', label: log.status_label, variant: variant %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <% if @logs.respond_to?(:total_pages) %>
      <div class="pt-4"><%= paginate @logs %></div>
    <% end %>
  <% else %>
    <div class="text-center py-12">
      <i class="fa-solid fa-comment-sms text-4xl text-neutral-600 mb-4"></i>
      <p class="text-neutral-400">Aucun SMS</p>
    </div>
  <% end %>
</div>

