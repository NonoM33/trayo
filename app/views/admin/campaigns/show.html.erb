<!DOCTYPE html>
<html>
<head>
  <title>Détails Campagne - Admin Trayo</title>
  <%= stylesheet_link_tag "admin" %>
</head>
<body>
  <% @page_title = "Détails Campagne" %>
  
  <div class="app-layout">
    <%= render 'admin/shared/sidebar' %>
    
    <div class="main-content">
      <%= render 'admin/shared/navbar' %>
      
      <div class="container">
        <div class="card">
          <div class="card-header">
            <h2><%= @campaign.title %></h2>
            <div class="action-buttons">
              <%= link_to "Modifier", edit_admin_campaign_path(@campaign), class: "btn btn-primary" %>
              <%= link_to "Retour", admin_campaigns_path, class: "btn btn-outline" %>
            </div>
          </div>
          
          <div class="card-body">
            <div class="two-col">
              <div class="info-item">
                <label>Titre</label>
                <div class="info-value"><%= @campaign.title %></div>
              </div>
              
              <div class="info-item">
                <label>Statut</label>
                <div class="info-value">
                  <span class="status-badge <%= @campaign.is_active ? 'status-active' : 'status-inactive' %>">
                    <%= @campaign.is_active ? 'ACTIVE' : 'INACTIVE' %>
                  </span>
                </div>
              </div>
              
              <div class="info-item">
                <label>Date de Début</label>
                <div class="info-value"><%= @campaign.start_date&.strftime("%d/%m/%Y à %H:%M") %></div>
              </div>
              
              <div class="info-item">
                <label>Date de Fin</label>
                <div class="info-value"><%= @campaign.end_date&.strftime("%d/%m/%Y à %H:%M") %></div>
              </div>
              
              <div class="info-item">
                <label>Jours Restants</label>
                <div class="info-value">
                  <% if @campaign.active_and_current? %>
                    <span class="status-badge status-validated"><%= @campaign.days_remaining %> jours</span>
                  <% else %>
                    <span class="status-badge status-inactive">Terminée</span>
                  <% end %>
                </div>
              </div>
              
              <div class="info-item">
                <label>Progression</label>
                <div class="info-value">
                  <% if @campaign.active_and_current? %>
                    <div class="progress-bar">
                      <div class="progress-fill" style="width: <%= @campaign.progress_percentage %>%"></div>
                    </div>
                    <small><%= @campaign.progress_percentage %>% complété</small>
                  <% else %>
                    <span class="status-badge status-inactive">N/A</span>
                  <% end %>
                </div>
              </div>
            </div>
            
            <div class="form-group">
              <label>Description</label>
              <div class="info-value"><%= simple_format(@campaign.description) %></div>
            </div>
            
            <div class="two-col">
              <div class="form-group">
                <label>Couleur de la Bannière</label>
                <div class="info-value">
                  <div style="display: flex; align-items: center; gap: 8px;">
                    <div style="width: 20px; height: 20px; background-color: <%= @campaign.banner_color %>; border-radius: 4px; border: 1px solid var(--border-color);"></div>
                    <span><%= @campaign.banner_color %></span>
                  </div>
                </div>
              </div>
              
              <div class="form-group">
                <label>Titre de la Popup</label>
                <div class="info-value"><%= @campaign.popup_title %></div>
              </div>
            </div>
            
            <div class="form-group">
              <label>Message de la Popup</label>
              <div class="info-value"><%= simple_format(@campaign.popup_message) %></div>
            </div>
            
            <div class="two-col">
              <div class="info-item">
                <label>Créé le</label>
                <div class="info-value"><%= @campaign.created_at&.strftime("%d/%m/%Y à %H:%M") %></div>
              </div>
              
              <div class="info-item">
                <label>Modifié le</label>
                <div class="info-value"><%= @campaign.updated_at&.strftime("%d/%m/%Y à %H:%M") %></div>
              </div>
            </div>
          </div>
          
          <div class="card-footer">
            <div class="action-buttons">
              <%= link_to "Modifier", edit_admin_campaign_path(@campaign), class: "btn btn-primary" %>
              <%= link_to "Retour à la Liste", admin_campaigns_path, class: "btn btn-outline" %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
