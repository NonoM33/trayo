<% content_for :title, "Modifier Banni√®re" %>

<div class="space-y-6 max-w-3xl mx-auto">
  <!-- Header -->
  <div class="flex items-center gap-4">
    <%= link_to admin_sms_campaigns_path(anchor: 'banners'), class: "p-2 rounded-lg hover:bg-neutral-800 text-neutral-400 hover:text-white transition-colors" do %>
      <i class="fa-solid fa-arrow-left"></i>
    <% end %>
    <div>
      <h1 class="text-2xl font-bold text-white">Modifier la Banni√®re</h1>
      <p class="text-neutral-400"><%= @banner.title %></p>
    </div>
  </div>

  <%= form_with model: [:admin, @banner], local: true, class: "space-y-6" do |f| %>
    <div class="rounded-xl bg-neutral-900 border border-neutral-800 p-6 space-y-5">
      <div>
        <label class="block text-sm font-medium text-neutral-300 mb-2">Titre *</label>
        <%= f.text_field :title, class: "w-full px-4 py-2.5 rounded-lg bg-neutral-800 border border-neutral-700 text-white placeholder-neutral-500 focus:border-purple-500 focus:ring-1 focus:ring-purple-500" %>
      </div>

      <div>
        <label class="block text-sm font-medium text-neutral-300 mb-2">Contenu</label>
        <%= f.text_area :content, rows: 3, class: "w-full px-4 py-2.5 rounded-lg bg-neutral-800 border border-neutral-700 text-white placeholder-neutral-500 focus:border-purple-500 focus:ring-1 focus:ring-purple-500" %>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-neutral-300 mb-2">Type de banni√®re</label>
          <%= f.select :banner_type,
              options_for_select([
                ["‚ÑπÔ∏è Information", "info"],
                ["‚úÖ Succ√®s", "success"],
                ["‚ö†Ô∏è Avertissement", "warning"],
                ["‚ùå Erreur", "error"],
                ["üéÅ Promotion", "promotion"],
                ["üì¢ Annonce", "announcement"],
                ["üîß Maintenance", "maintenance"]
              ], @banner.banner_type),
              {},
              class: "w-full px-4 py-2.5 rounded-lg bg-neutral-800 border border-neutral-700 text-white focus:border-purple-500 focus:ring-1 focus:ring-purple-500" %>
        </div>

        <div>
          <label class="block text-sm font-medium text-neutral-300 mb-2">Audience cible</label>
          <%= f.select :target_audience,
              options_for_select([
                ["Tous les clients", "all"],
                ["Clients actifs", "active_clients"],
                ["Clients inactifs", "inactive_clients"],
                ["Clients avec solde", "with_balance"],
                ["Commissions impay√©es", "unpaid_commissions"],
                ["Nouveaux clients", "new_clients"]
              ], @banner.target_audience),
              {},
              class: "w-full px-4 py-2.5 rounded-lg bg-neutral-800 border border-neutral-700 text-white focus:border-purple-500 focus:ring-1 focus:ring-purple-500" %>
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-neutral-300 mb-2">Texte du bouton (optionnel)</label>
          <%= f.text_field :button_text, class: "w-full px-4 py-2.5 rounded-lg bg-neutral-800 border border-neutral-700 text-white placeholder-neutral-500 focus:border-purple-500 focus:ring-1 focus:ring-purple-500" %>
        </div>

        <div>
          <label class="block text-sm font-medium text-neutral-300 mb-2">URL du bouton</label>
          <%= f.text_field :button_url, class: "w-full px-4 py-2.5 rounded-lg bg-neutral-800 border border-neutral-700 text-white placeholder-neutral-500 focus:border-purple-500 focus:ring-1 focus:ring-purple-500" %>
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-neutral-300 mb-2">Date de d√©but</label>
          <%= f.datetime_local_field :starts_at, class: "w-full px-4 py-2.5 rounded-lg bg-neutral-800 border border-neutral-700 text-white focus:border-purple-500 focus:ring-1 focus:ring-purple-500" %>
        </div>

        <div>
          <label class="block text-sm font-medium text-neutral-300 mb-2">Date de fin</label>
          <%= f.datetime_local_field :ends_at, class: "w-full px-4 py-2.5 rounded-lg bg-neutral-800 border border-neutral-700 text-white focus:border-purple-500 focus:ring-1 focus:ring-purple-500" %>
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-neutral-300 mb-2">Priorit√© (0-100)</label>
          <%= f.number_field :priority, min: 0, max: 100, class: "w-full px-4 py-2.5 rounded-lg bg-neutral-800 border border-neutral-700 text-white focus:border-purple-500 focus:ring-1 focus:ring-purple-500" %>
        </div>

        <div class="flex flex-col justify-center">
          <label class="flex items-center gap-3 cursor-pointer">
            <%= f.check_box :is_dismissible, class: "w-5 h-5 rounded bg-neutral-800 border-neutral-700 text-purple-500 focus:ring-purple-500" %>
            <span class="text-sm text-neutral-300">Peut √™tre ferm√©e</span>
          </label>
          
          <label class="flex items-center gap-3 cursor-pointer mt-3">
            <%= f.check_box :is_active, class: "w-5 h-5 rounded bg-neutral-800 border-neutral-700 text-purple-500 focus:ring-purple-500" %>
            <span class="text-sm text-neutral-300">Active</span>
          </label>
        </div>
      </div>
    </div>

    <!-- Stats -->
    <div class="rounded-xl bg-neutral-900 border border-neutral-800 p-6">
      <h3 class="text-lg font-semibold text-white mb-4">Statistiques</h3>
      <div class="grid grid-cols-3 gap-4">
        <div class="text-center p-4 rounded-lg bg-neutral-800">
          <div class="text-2xl font-bold text-blue-400"><%= @banner.views_count %></div>
          <div class="text-sm text-neutral-400">Vues</div>
        </div>
        <div class="text-center p-4 rounded-lg bg-neutral-800">
          <div class="text-2xl font-bold text-emerald-400"><%= @banner.clicks_count %></div>
          <div class="text-sm text-neutral-400">Clics</div>
        </div>
        <div class="text-center p-4 rounded-lg bg-neutral-800">
          <div class="text-2xl font-bold text-amber-400"><%= @banner.dismissals_count %></div>
          <div class="text-sm text-neutral-400">Ferm√©es</div>
        </div>
      </div>
    </div>

    <div class="flex items-center justify-between">
      <%= link_to admin_banner_path(@banner), method: :delete, data: { confirm: "Supprimer cette banni√®re ?" }, class: "px-4 py-2.5 rounded-lg bg-red-600/20 text-red-400 hover:bg-red-600/30 transition-colors font-medium" do %>
        <i class="fa-solid fa-trash mr-2"></i>Supprimer
      <% end %>
      
      <div class="flex items-center gap-3">
        <%= link_to admin_sms_campaigns_path(anchor: 'banners'), class: "px-4 py-2.5 rounded-lg border border-neutral-700 text-neutral-300 hover:bg-neutral-800 transition-colors font-medium" do %>
          Annuler
        <% end %>
        <%= f.submit "Enregistrer", class: "px-5 py-2.5 rounded-lg bg-purple-600 text-white font-medium hover:bg-purple-700 transition-colors cursor-pointer" %>
      </div>
    </div>
  <% end %>
</div>

