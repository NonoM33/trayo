<!-- Campaign Banner -->
<% if @current_campaign&.active_and_current? %>
  <div class="campaign-banner" style="background: <%= @current_campaign.banner_color %>; color: white; margin-bottom: 24px; border-radius: var(--radius-lg); padding: 20px; position: relative; overflow: hidden;">
    <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 16px;">
      <div style="flex: 1; min-width: 300px;">
        <h3 style="margin: 0 0 8px 0; font-size: 20px; font-weight: 700; display: flex; align-items: center; gap: 12px;">
          <i class="fa-icon fa-md fa-bullhorn"></i> <%= @current_campaign.title %>
        </h3>
        <p style="margin: 0; font-size: 14px; opacity: 0.9; line-height: 1.5;">
          <%= @current_campaign.description %>
        </p>
      </div>
      
      <div style="display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
        <div style="text-align: center;">
          <div style="font-size: 24px; font-weight: 800; margin-bottom: 4px;">
            <%= @current_campaign.days_remaining %>
          </div>
          <div style="font-size: 12px; opacity: 0.8; text-transform: uppercase; letter-spacing: 0.5px;">
            Jours restants
          </div>
        </div>
        
        <div style="min-width: 120px;">
          <div style="background: rgba(255, 255, 255, 0.2); height: 8px; border-radius: var(--radius-full); overflow: hidden;">
            <div style="width: <%= @current_campaign.progress_percentage %>%; height: 100%; background: rgba(255, 255, 255, 0.8); border-radius: var(--radius-full); transition: width 0.3s ease;"></div>
          </div>
          <div style="font-size: 11px; text-align: center; margin-top: 4px; opacity: 0.8;">
            <%= @current_campaign.progress_percentage %>% terminé
          </div>
        </div>
        
        <button onclick="dismissCampaignBanner()" style="background: rgba(255, 255, 255, 0.2); border: none; color: white; padding: 8px 12px; border-radius: var(--radius-md); cursor: pointer; font-size: 12px; transition: background 0.2s;">
          ✕ Fermer
        </button>
      </div>
    </div>
    
    <!-- Floating elements for visual appeal -->
    <div style="position: absolute; top: -20px; right: -20px; width: 60px; height: 60px; background: rgba(255, 255, 255, 0.1); border-radius: var(--radius-full); animation: float 3s ease-in-out infinite;"></div>
    <div style="position: absolute; bottom: -30px; left: -30px; width: 80px; height: 80px; background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-full); animation: float 4s ease-in-out infinite reverse;"></div>
  </div>
  
  <style>
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-10px) rotate(5deg); }
    }
    
    .campaign-banner {
      animation: slideDown 0.6s ease-out;
    }
    
    @media (max-width: 768px) {
      .campaign-banner {
        padding: 16px;
      }
      
      .campaign-banner h3 {
        font-size: 18px;
      }
      
      .campaign-banner p {
        font-size: 13px;
      }
    }
  </style>
  
  <script>
    function dismissCampaignBanner() {
      const banner = document.querySelector('.campaign-banner');
      if (banner) {
        banner.style.animation = 'slideUp 0.4s ease-out forwards';
        setTimeout(() => {
          banner.style.display = 'none';
        }, 400);
      }
    }
  </script>
<% else %>
  <!-- Debug: No campaign found -->
  <% if Rails.env.development? %>
    <div style="background: #ffebee; padding: 10px; margin-bottom: 20px; border-radius: 4px; font-family: monospace; font-size: 12px; border-left: 4px solid #f44336;">
      <strong>DEBUG: Aucune campagne active trouvée</strong><br>
      Current Campaign: <%= @current_campaign&.title || 'nil' %><br>
      Active & Current: <%= @current_campaign&.active_and_current? || false %><br>
      Campaign Class: <%= @current_campaign.class.name rescue 'Error' %>
    </div>
  <% end %>
<% end %>
