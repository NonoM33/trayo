<div class="flex h-full flex-col relative shrink-0" data-controller="sidebar" data-sidebar-storage-key-value="trayoSidebar" style="height: 100vh;">
  <!-- Mobile Sidebar Overlay -->
  <div class="absolute inset-0 z-50 md:hidden hidden" data-sidebar-target="mobileSidebar">
    <!-- Backdrop -->
    <div class="absolute inset-0 bg-black/50 transition-opacity duration-300" data-sidebar-target="mobileBackdrop" data-action="click->sidebar#closeMobile"></div>

    <!-- Sidebar Panel -->
    <div class="absolute inset-y-0 left-0 w-64 bg-neutral-50 dark:bg-neutral-900 shadow-xl border-r border-neutral-200 dark:border-neutral-800 transition-transform duration-300 ease-out" data-sidebar-target="mobilePanel">
      <div data-sidebar-target="sharedContent"></div>
    </div>
  </div>

  <div class="relative z-0 flex h-full">
    <div class="relative flex h-full flex-row">
      <details class="w-13 open:w-64 group/sidebar relative z-20 h-full shrink-0 overflow-hidden border-r border-neutral-200 bg-neutral-50 max-md:hidden motion-safe:transition-all motion-safe:duration-300 dark:border-neutral-800 dark:bg-neutral-900" data-sidebar-target="desktopSidebar" style="height: 100vh;">
        <!-- Tiny Sidebar (shown when closed) -->
        <summary class="group-open/sidebar:hidden flex min-h-screen h-full cursor-e-resize list-none flex-col items-start pl-2 pr-1.5">
          <div class="flex h-13 w-full items-center justify-start">
            <button class="cursor-e-resize flex size-10 items-center justify-center rounded-lg text-neutral-500 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 sm:size-9 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800" data-action="click->sidebar#open">
              <i class="fa-solid fa-bars"></i>
            </button>
          </div>

          <div class="mt-1.5 sm:mt-2 flex w-full flex-col items-start gap-1 overflow-y-auto">
            <%= link_to admin_dashboard_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Tableau de Bord" do %>
              <i class="fa-solid fa-chart-line"></i>
            <% end %>
            
            <% if current_user.is_admin? %>
              <%= link_to admin_clients_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Clients" do %>
                <i class="fa-solid fa-users"></i>
              <% end %>
              <%= link_to admin_bots_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Bots Trading" do %>
                <i class="fa-solid fa-robot"></i>
              <% end %>
              <%= link_to admin_vps_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "VPS" do %>
                <i class="fa-solid fa-server"></i>
              <% end %>
              <%= link_to admin_campaigns_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Campagnes" do %>
                <i class="fa-solid fa-bullhorn"></i>
              <% end %>
              <%= link_to admin_invitations_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Invitations" do %>
                <i class="fa-solid fa-ticket-alt"></i>
              <% end %>
              <%= link_to admin_payments_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Paiements" do %>
                <i class="fa-solid fa-credit-card"></i>
              <% end %>
              <%= link_to admin_credits_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Crédits" do %>
                <i class="fa-solid fa-gift"></i>
              <% end %>
              <%= link_to admin_bonus_deposits_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Dépôts Bonus" do %>
                <i class="fa-solid fa-gift"></i>
              <% end %>
              <%= link_to admin_bonus_periods_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Périodes Bonus" do %>
                <i class="fa-solid fa-calendar"></i>
              <% end %>
              <%= link_to admin_withdrawals_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Retraits" do %>
                <i class="fa-solid fa-arrow-up"></i>
              <% end %>
              <%= link_to admin_deposits_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Dépôts" do %>
                <i class="fa-solid fa-arrow-down"></i>
              <% end %>
              <%= link_to admin_trades_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Trades" do %>
                <i class="fa-solid fa-exchange-alt"></i>
              <% end %>
              <%= link_to admin_trade_defenders_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Trade Defender" do %>
                <i class="fa-solid fa-shield-alt"></i>
              <% end %>
              <%= link_to admin_support_tickets_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "SAV" do %>
                <i class="fa-solid fa-headset"></i>
                <% unread_count = SupportTicket.unread.count %>
                <% if unread_count > 0 %>
                  <span class="absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold px-1 rounded-full min-w-[16px] text-center"><%= unread_count %></span>
                <% end %>
              <% end %>
              <%= link_to admin_sms_logs_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "SMS" do %>
                <i class="fa-solid fa-comment-dots"></i>
              <% end %>
              <%= link_to admin_mt5_tokens_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Tokens MT5" do %>
                <i class="fa-solid fa-key"></i>
              <% end %>
              <%= link_to admin_maintenance_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Maintenance" do %>
                <i class="fa-solid fa-tools"></i>
              <% end %>
              <%= link_to admin_backups_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Backups" do %>
                <i class="fa-solid fa-database"></i>
              <% end %>
            <% else %>
              <%= link_to admin_client_path(current_user), class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Mon Profil" do %>
                <i class="fa-solid fa-user"></i>
              <% end %>
              <%= link_to admin_shop_index_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Boutique" do %>
                <i class="fa-solid fa-shopping-cart"></i>
              <% end %>
              <%= link_to admin_my_bots_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Mes Bots" do %>
                <i class="fa-solid fa-robot"></i>
              <% end %>
              <%= link_to admin_my_trades_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Mes Trades" do %>
                <i class="fa-solid fa-chart-line"></i>
              <% end %>
              <%= link_to admin_vps_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Mes VPS" do %>
                <i class="fa-solid fa-server"></i>
              <% end %>
              <%= link_to admin_bonus_deposits_path, class: "relative flex h-8 w-8.5 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Programme Bonus" do %>
                <i class="fa-solid fa-gift"></i>
              <% end %>
            <% end %>
          </div>

          <div class="flex-grow"></div>

          <div class="py-1 sm:py-1.5 flex items-start justify-center">
            <%= link_to admin_client_path(current_user), class: "flex mb-1 h-8 w-9 items-center justify-center rounded-lg text-neutral-700 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 dark:text-neutral-100 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800", title: "Profil" do %>
              <div class="size-6 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-xs">
                <%= current_user.email[0].upcase %>
              </div>
            <% end %>
          </div>
        </summary>

        <!-- Full Sidebar (shown when open) -->
        <div class="h-full w-64 overflow-x-clip overflow-y-auto bg-neutral-50 text-clip whitespace-nowrap dark:bg-neutral-900" data-sidebar-target="desktopContent">
          <!-- Shared Sidebar Content Template -->
          <template data-sidebar-target="contentTemplate">
            <nav class="min-h-screen relative flex h-full w-full flex-1 flex-col overflow-y-auto select-none">
            <div class="sticky top-0 z-30 bg-neutral-50 dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-800">
              <div class="px-1.5 sm:px-2">
                <div class="flex h-13 items-center justify-between">
                  <%= link_to admin_dashboard_path, class: "flex size-10 items-center justify-center rounded-lg text-neutral-900 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 sm:size-9 dark:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800" do %>
                    <div class="size-8 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg">
                      T
                    </div>
                  <% end %>
                  <div class="flex">
                    <button class="flex size-10 cursor-w-resize items-center justify-center rounded-lg text-neutral-500 hover:bg-neutral-100 focus:outline-none focus-visible:bg-neutral-100 disabled:opacity-50 sm:size-9 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus-visible:dark:bg-neutral-800" aria-expanded="true" aria-label="Close sidebar" data-state="closed" data-action="click->sidebar#close">
                      <i class="fa-solid fa-chevron-left"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <aside class="relative bg-neutral-50 p-1.5 last:mb-5 sm:p-2 dark:bg-neutral-900">
              <% if current_user.is_admin? %>
                <div class="mb-4">
                  <div class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 px-2">Principal</div>
                  <%= link_to admin_dashboard_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path == admin_dashboard_path ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-chart-line"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Tableau de Bord</div>
                      </div>
                    </div>
                  <% end %>
                </div>

                <div class="mb-4">
                  <div class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 px-2">Gestion</div>
                  <%= link_to admin_clients_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path == admin_clients_path ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-users"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Clients</div>
                      </div>
                    </div>
                  <% end %>
                  <%= link_to admin_bots_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/bots') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-robot"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Bots Trading</div>
                      </div>
                    </div>
                  <% end %>
                  <%= link_to admin_vps_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/vps') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-server"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">VPS</div>
                      </div>
                    </div>
                  <% end %>
                  <%= link_to admin_campaigns_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/campaigns') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-bullhorn"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Campagnes</div>
                      </div>
                    </div>
                  <% end %>
                  <%= link_to admin_invitations_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/invitations') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-ticket-alt"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Invitations</div>
                      </div>
                    </div>
                  <% end %>
                </div>

                <div class="mb-4">
                  <div class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 px-2">Finance</div>
                  <%= link_to admin_payments_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path == admin_payments_path ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-credit-card"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Paiements</div>
                      </div>
                    </div>
                  <% end %>
                  <%= link_to admin_credits_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path == admin_credits_path ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-gift"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Crédits</div>
                      </div>
                    </div>
                  <% end %>
                  <%= link_to admin_bonus_deposits_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/bonus') && !request.path.start_with?('/admin/bonus_period') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-gift"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Dépôts Bonus</div>
                      </div>
                    </div>
                  <% end %>
                  <%= link_to admin_bonus_periods_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/bonus_period') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-calendar"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Périodes Bonus</div>
                      </div>
                    </div>
                  <% end %>
                  <%= link_to admin_withdrawals_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/withdrawals') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-arrow-up"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Retraits</div>
                      </div>
                    </div>
                  <% end %>
                  <%= link_to admin_deposits_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/deposits') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-arrow-down"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Dépôts</div>
                      </div>
                    </div>
                  <% end %>
                </div>

                <div class="mb-4">
                  <div class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 px-2">Trading</div>
                  <%= link_to admin_trades_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/trades') && !request.path.start_with?('/admin/trade_defenders') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-exchange-alt"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Trades</div>
                      </div>
                    </div>
                  <% end %>
                  <%= link_to admin_trade_defenders_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/trade_defenders') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-shield-alt"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Trade Defender</div>
                      </div>
                    </div>
                  <% end %>
                </div>

                <div class="mb-4">
                  <div class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 px-2">Support</div>
                  <%= link_to admin_support_tickets_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/support_tickets') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-headset"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">SAV</div>
                      </div>
                      <% unread_count = SupportTicket.unread.count %>
                      <% if unread_count > 0 %>
                        <span class="ml-auto bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded-full"><%= unread_count %></span>
                      <% end %>
                    </div>
                  <% end %>
                  <%= link_to admin_sms_logs_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/sms_logs') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-comment-dots"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">SMS</div>
                      </div>
                    </div>
                  <% end %>
                </div>

                <div class="mb-4">
                  <div class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 px-2">Configuration</div>
                  <%= link_to admin_mt5_tokens_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/mt5_tokens') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-key"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Tokens MT5</div>
                      </div>
                    </div>
                  <% end %>
                  <%= link_to admin_maintenance_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/maintenance') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-tools"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Maintenance</div>
                      </div>
                    </div>
                  <% end %>
                  <%= link_to admin_backups_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/backups') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-database"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Backups</div>
                      </div>
                    </div>
                  <% end %>
                </div>
              <% else %>
                <div class="mb-4">
                  <div class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 px-2">Principal</div>
                  <%= link_to admin_dashboard_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path == admin_dashboard_path ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-chart-line"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Tableau de Bord</div>
                      </div>
                    </div>
                  <% end %>
                  <%= link_to admin_client_path(current_user), class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path == admin_client_path(current_user) ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-user"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Mon Profil</div>
                      </div>
                    </div>
                  <% end %>
                </div>

                <div class="mb-4">
                  <div class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 px-2">Mes Services</div>
                  <%= link_to admin_shop_index_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/shop') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-shopping-cart"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Boutique</div>
                      </div>
                    </div>
                  <% end %>
                  <%= link_to admin_my_bots_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/my_bots') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-robot"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Mes Bots</div>
                      </div>
                    </div>
                  <% end %>
                  <%= link_to admin_my_trades_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/my_trades') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-chart-line"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Mes Trades</div>
                      </div>
                    </div>
                  <% end %>
                  <%= link_to admin_vps_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/vps') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-server"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Mes VPS</div>
                      </div>
                    </div>
                  <% end %>
                </div>

                <div class="mb-4">
                  <div class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 px-2">Bonus</div>
                  <%= link_to admin_bonus_deposits_path, class: "group w-full flex items-center justify-between gap-2 rounded-md px-2 py-1.5 text-left text-sm #{request.path.start_with?('/admin/bonus') ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400' : 'text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50'}" do %>
                    <div class="flex min-w-0 items-center gap-1.5">
                      <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                        <i class="fa-solid fa-gift"></i>
                      </div>
                      <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                        <div class="truncate">Programme Bonus</div>
                      </div>
                    </div>
                  <% end %>
                </div>
              <% end %>
            </aside>

            <div class="grow"></div>

            <div class="sticky bottom-0 z-30 bg-neutral-50 p-1.5 empty:hidden sm:p-2 dark:bg-neutral-900 border-t border-neutral-200 dark:border-neutral-800">
              <%= link_to admin_client_path(current_user), class: "w-full flex items-center gap-2 rounded-md px-1 sm:px-1.5 py-1 sm:py-1.5 text-left text-sm text-neutral-700 hover:bg-neutral-100 focus-visible:bg-neutral-100 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-neutral-100 dark:hover:bg-neutral-700/50 dark:focus-visible:bg-neutral-700/50" do %>
                <div class="flex items-center justify-center group-disabled:opacity-50 group-data-disabled:opacity-50">
                  <div class="flex h-6 w-6 shrink-0 overflow-hidden rounded-full bg-gradient-to-br from-blue-500 to-purple-600">
                    <div class="h-6 w-6 flex items-center justify-center text-white font-semibold text-xs">
                      <%= current_user.email[0].upcase %>
                    </div>
                  </div>
                </div>
                <div class="min-w-0">
                  <div class="flex min-w-0 grow items-center gap-2.5 group-data-no-contents-gap:gap-0">
                    <div class="truncate text-xs"><%= current_user.first_name || current_user.email.split('@').first %></div>
                  </div>
                  <div class="truncate text-xs text-neutral-500 dark:text-neutral-400"><%= current_user.is_admin? ? 'Administrateur' : 'Client' %></div>
                </div>
              <% end %>
              <%= link_to admin_logout_path, data: { turbo_method: :delete }, class: "w-full mt-2 flex items-center justify-center gap-2 rounded-md px-1 sm:px-1.5 py-1 sm:py-1.5 text-left text-sm text-red-600 hover:bg-red-50 focus-visible:bg-red-50 focus:outline-hidden disabled:cursor-not-allowed disabled:opacity-50 dark:text-red-400 dark:hover:bg-red-900/20 dark:focus-visible:bg-red-900/20" do %>
                <i class="fa-solid fa-sign-out-alt"></i>
                <span class="text-xs">Déconnexion</span>
              <% end %>
            </div>
          </nav>
          </template>
        </div>
      </details>
    </div>

  </div>
</div>

<script>
  (function() {
    const sidebar = document.querySelector('[data-controller="sidebar"]');
    if (sidebar) {
      const template = sidebar.querySelector('[data-sidebar-target="contentTemplate"]');
      const sharedContent = sidebar.querySelector('[data-sidebar-target="sharedContent"]');
      const desktopContent = sidebar.querySelector('[data-sidebar-target="desktopContent"]');
      
      if (template && sharedContent) {
        sharedContent.innerHTML = template.innerHTML;
      }
      
      if (template && desktopContent) {
        desktopContent.innerHTML = template.innerHTML;
      }
    }
  })();
</script>
